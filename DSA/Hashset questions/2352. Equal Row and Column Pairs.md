```cpp
class Solution {
   public:
    int equalPairs(vector<vector<int>>& grid) {
        int n = grid.size(); // since its nxn matrix
        map<vector<int>, int> hmap; // { grid[row]: counter }

        // row wise traversal
        for (int row = 0; row < n; row++) {
            // increment entire grid row {3, 2, 1} in hmap
            // default its 0
            hmap[grid[row]]++;
        }

        int counter = 0;

        // col wise traversal
        for (int col = 0; col < n; col++) {
            vector<int> temp;
            for (int row = 0; row < n; row++) {
                temp.push_back(grid[row][col]);
            }
            counter += hmap[temp];
        }

        return counter;
    }
};

int main() {
    vector<vector<int>> grid = {
		{3, 1, 2, 2},
		{1, 4, 4, 5}, 
		{2, 4, 2, 2}, 
		{2, 4, 2, 2}
	};
    Solution sol;
    int ans = sol.equalPairs(grid);
    cout << "ans -->" << ans << endl;
}

```

## codestory
1. traverse row wise and build hashset from grid 
	1. {3, 1, 2, 2} will be added to hashmap with freq of 1
	2. {1, 4, 4, 5} will be added to hashmap with freq of 1
	3. {2, 4, 2, 2} will be added to hashmap with freq of 1
	4. {2, 4, 2, 2} will be added to hashmap with freq of 2 (repeated twice)
2. initialize counter to 0
3. traverse col wise and check if current column exists in hmap 
	1. if it does not exists it will be incremented by 0 (default value of hmap)
	2. if it does exists before it will be incremented by hmap[temp] times 

---
#hashmap #dsa